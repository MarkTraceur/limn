@import 'colors'
@import 'nib'

section.graph
    position relative
    margin 0 auto
    min-width 640px
    max-width 960px
    
    :not(svg) *
        position relative
    
    .graph-details > *
        margin-left auto
        margin-right auto
    
    
    /* * * *  Chart & Viewport  * * * {{{ */
    .graph-viewport-row
        // margin 1em 1em 3em
        margin-bottom 3em
    
    div.viewport
        position relative
        min-width 200px
        min-height 320px
        overflow hidden
    
    .callout
        float left
        z-index 100
        width 15.385em
        padding 0 6em 0 0
        background-color white
        text-align right
        
        .latest-metric
            font-size 18px
            line-height 36px
        .metric-change
            font 11px/1.5 "helvetica neue", helvetica, arial, sans-serif
            span
                display inline-block
                &.dates
                    width 140px
                &.value
                    width 60px
    
    .graph-legend
        absolute top 1em right 1em
        z-index 100
        width 200px
        
        padding 1em
        background-color rgba(255,255,255, 0.75)
        font 12px/1.5 "helvetica neue", helvetica, arial, sans-serif
        border 1px solid $light
        border-radius 5px
        
        b
            display inline-block
            width 140px
        .whole
            display inline-block
            width 30px
            text-align right
        .fraction
            text-align left
        .suffix
            text-align left
    
    .viewport:hover + .graph-legend
        border 1px solid $light
    
    /* }}} */
    
    
    /* * * *  Graph Details & Info Pane  * * * {{{ */
    .graph-name-row
        // Accommodate the callout box
        margin 0 0 1em
        min-height 38px
        
        input.graph-name
            display block
            absolute top 0 left 0
            right 0
            width auto
            font-size 18px
            line-height 25px
            height 25px
            padding 6px
            border-color $light
    
    .graph-info-pane
        .row-fluid
            .half.control-group
                width 50%
                float left
                margin-left 0
                margin-right 0
            label
                width 100px
            .controls
                margin-left 110px
        .help-block
            font-size 11px
            line-height 1.3
        .graph-size-row input[type="text"]
            display inline-block
    
    /* }}} */
    
    
    /* * * *  Subnav & Tabs  * * * {{{ */
    .graph-settings-row
        max-width 900px
    
    .graph-settings.tabbable
        .graph-settings-nav
            & > .nav
                z-index 3
                margin-bottom 0
                border 0
                li h3
                    line-height 14px
                    margin 2px
                    padding 8px 12px
                    border-radius 5px
                li
                    margin-right 4px
            
            .nav-shadow-shim, .nav-shadow
                position absolute
                width 100%
            .nav-shadow-shim
                left -7px
                bottom -1px
                z-index 2
                height 30px
                padding 0 7px
                background-color white
                border-bottom 1px solid #ccc
            .nav-shadow
                left 0
                bottom 0
                z-index 1
                height 10px
                box-shadow 0 0 6px 2px rgba(0,0,0,0.20)
            
        
        .graph-tab-content > .tab-pane
            padding 0.5em
            margin-top 1em
            height 100%
            
            &.graph-data-pane
                margin-top 0
                padding 0
                border-bottom 1px solid #ddd
    
    .graph-controls
        z-index 100
        margin-top 2px
        
        & > .btn, & > .btn-group
            margin 0 0.5em
        
        .btn-group
            display inline-block
        
        input[type="button"]
            min-width 5em
            text-align center
    
    .graph-permalink input
        cursor auto
    
    .graph-spinner
        display none
        absolute bottom 3px left 0
        margin-left -2.0em
        width  2.5em
        height 2.5em
    
    /* }}} */
    
    
    /* * * *  Chart Options  * * * {{{ */
    .chart-options
        
        &, .fields
            width 100%
            min-height 250px
        
        .chart-options-controls
            font-size 11px
            
            .control-group, .btn-group
                display inline-block
                font-size 11px
            
            .btn
                font-size 11px
                padding 3px 9px 3px
            & > .btn, & :not(.btn-group) .btn
                margin-right 0.75em
            
    
    .chart-option.field
        float left
        z-index 3
        padding 0.5em
        margin 0.4em
        min-width 200px
        max-width 250px
        min-height 1.5em
        line-height 1.5
        overflow hidden
        
        border-radius 5px
        background-color #ccc
        font-size 90%
        
        
        h3
            font-size 14px
            line-height 1.3
            cursor pointer
        
        .close
            absolute top right 0.1em
            width 1em
            height 1em
            line-height 1.2em
            text-align center
            text-decoration none
            z-index 10
            cursor pointer
            opacity 0.3
            &:hover
                opacity 0.6
        
        input.value:not([type="checkbox"])
            width 240px
            font-family menlo, monospace
        textarea
            resize none
        
        .shortname
            font-weight bold
            color white
            min-height 1.5em
        .name
            display none
            font-weight bold
            // line-height 1.5
            // font-size 100%
        .type
            &::before
                content "Type: "
                font-weight bold
        .default
            &::before
                content "Default: "
                font-weight bold
        .desc
            position relative
        .tags, .examples
            cursor pointer
        .tags
            font-size 85%
            &::before
                content "Tags: "
                font-weight bold
            .tag
                margin 0.2em
                line-height 1.5
                padding 0.2em
                white-space nowrap
                color white
                background-color rgba(255,255,255, 0.15)
                border-radius 5px
                // border 1px solid white
        .examples
            display none
            &::before
                content "Examples"
                font-weight bold
            .example
                position relative
        
        
        &.collapsed
            z-index 2
            width auto
            min-width 50px
            min-height 2em
            max-width none
            line-height 2
            
            cursor pointer
            text-align center
            
            *
                display none
            .shortname
                display inline-block
                min-width 50px
                min-height auto
        
        
        /* Category/Tag Colors {{{ */
        for i in 0...length($hilites)
            $bg_color    = $hilites[i]
            $tag_color   = $bg_color + contrast_direction($bg_color) * 50%
            $fg_color    = (lightness($bg_color) > 55%) ? $dark : $light
            
            &.category_{i}
                color $fg_color
                background-color $bg_color
                // .shortname, .name, .close
                //     color $tag_color
                label, h1, h2, h3, .shortname, .name, .close
                    color $fg_color
            
            .tag.category_{i}
                // border 1px solid $tag_color
                // color $tag_color
                // background-color $bg_color
                color $fg_color
                background-color $bg_color
        
        /* }}} */
        
    /* }}} End Chart Options */




